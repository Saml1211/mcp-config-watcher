# MCP Config Watcher Usage Guide

This guide explains how to set up and use the MCP Config Watcher to automatically document your MCP servers.

## Installation

### Prerequisites

- Node.js 18 or higher
- npm 7 or higher
- A configured MCP settings file

### Install from npm

```bash
npm install -g mcp-config-watcher
```

### Install from source

```bash
git clone https://github.com/your-username/mcp-config-watcher.git
cd mcp-config-watcher
npm install
npm link
```

## Configuration

MCP Config Watcher can be configured using a YAML file. The default location is `config.yml` in the root directory, but you can specify a different path using the `--config` option.

### Sample Configuration

```yaml
paths:
  # Path to the MCP settings file
  settings: "/Users/username/Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json"
  # Path to the output markdown file
  markdown: "/Users/username/Documents/mcp_servers_and_tools.md"

watcher:
  # Enable or disable file watching
  enabled: true
  # Poll interval in milliseconds
  pollInterval: 1000

# Optional AI configuration (if using AI-powered tool discovery)
ai:
  enabled: true
  openai:
    apiKey: "${OPENAI_API_KEY}"  # From environment variable
  cache:
    enabled: true
    maxAge: 86400000  # 24 hours
  fallback:
    enabled: true
```

### Configuration Options

| Option | Description | Default |
| ------ | ----------- | ------- |
| `paths.settings` | Path to the MCP settings file | User's Claude settings file |
| `paths.markdown` | Path to the output markdown file | `./mcp_servers_and_tools.md` |
| `watcher.enabled` | Enable or disable file watching | `true` |
| `watcher.pollInterval` | Poll interval in milliseconds | `1000` |
| `ai.enabled` | Enable or disable AI-powered tool discovery | `false` |
| `ai.openai.apiKey` | OpenAI API key | From `OPENAI_API_KEY` environment variable |
| `ai.cache.enabled` | Enable or disable caching of AI responses | `true` |
| `ai.cache.maxAge` | Cache expiration in milliseconds | `86400000` (24 hours) |
| `ai.fallback.enabled` | Generate fallback tool names if none are found | `true` |

## Usage

### Command Line Interface

MCP Config Watcher provides a command line interface for managing the watcher service.

#### Start the Watcher

Start the watcher to monitor the MCP settings file for changes:

```bash
mcp-watcher start
```

#### Stop the Watcher

Stop the running watcher:

```bash
mcp-watcher stop
```

#### Check Status

Check if the watcher is running:

```bash
mcp-watcher status
```

#### Update Documentation

Manually update the documentation without starting the watcher:

```bash
mcp-watcher update
```

#### CLI Options

| Option | Description |
| ------ | ----------- |
| `--config, -c` | Path to configuration file |
| `--verbose, -v` | Enable verbose logging |
| `--help, -h` | Show help |

### Web Dashboard

MCP Config Watcher also provides a web dashboard for monitoring and managing the watcher.

#### Start the Web Dashboard

```bash
mcp-watcher web
```

This will start a web server on port 3000 (by default). You can then access the dashboard at `http://localhost:3000`.

#### Web Dashboard Features

- View current status of the watcher
- Start and stop the watcher
- Manually update documentation
- View logs
- Configure settings

### System Tray Application

MCP Config Watcher can also run as a system tray application for easy access.

#### Start the System Tray Application

```bash
mcp-watcher tray
```

This will add an icon to your system tray with a menu for managing the watcher.

#### System Tray Features

- Start and stop the watcher
- Check status
- Manually update documentation
- Open the web dashboard
- Exit the application

## Customizing the Documentation

The documentation generated by MCP Config Watcher can be customized in two ways:

### 1. Adding Custom Content

You can add custom content to the generated markdown file. Any content outside of the server sections will be preserved when the file is updated.

Example:

```markdown
# MCP Servers and Tools

This document provides an overview of all configured MCP servers and their available tools.

## Custom Section

This is custom content that will be preserved across updates.

## github.com/example/server

- **tool1**: Description of tool1.
- **tool2**: Description of tool2.

## Another Custom Section

More custom content that will be preserved.

This documentation is automatically generated by MCP Config Watcher.
Last updated: 3/15/2025, 4:58:02 PM
```

### 2. Customizing Tool Descriptions

Tool descriptions are sourced from the `toolDescriptions` object in the `parser.js` file. You can modify this object to add or update descriptions for specific tools.

If using AI-powered tool discovery, descriptions will be generated automatically for tools that don't have a static description.

## Troubleshooting

### Common Issues

#### Watcher not detecting changes

- Ensure the watcher is running (`mcp-watcher status`)
- Check that the path to the settings file is correct
- Increase the poll interval in the configuration

#### "Tools information not available" message

This message appears when the parser can't find information about tools for a specific server. In newer versions, this message should be replaced with:
- Tools from the autoApprove array in the settings
- Tools predicted using AI (if enabled)
- Generic tool names derived from the server name

#### AI tool discovery not working

- Ensure the OpenAI API key is correctly set
- Check that the `ai.enabled` option is set to `true`
- Verify network connectivity to the OpenAI API

### Logs

MCP Config Watcher logs to the following locations:

- CLI: Console output (use `--verbose` for more details)
- Web Dashboard: Browser console and dashboard logs page
- System Tray: Log file in `~/.mcp-config-watcher/logs`

## Best Practices

1. **Regular Updates**: Keep the documentation up to date by running the watcher regularly.
2. **Custom Content**: Add custom sections to provide additional context or information.
3. **Backup**: Keep backups of your documentation to prevent data loss.
4. **Tool Descriptions**: Provide clear and concise descriptions for your tools.
5. **Auto-Approve Awareness**: Be aware of which tools are auto-approved for security reasons.

## Advanced Topics

### Programmatic Usage

You can also use MCP Config Watcher programmatically in your Node.js applications:

```javascript
import { MCPWatcher } from 'mcp-config-watcher';

const config = {
  paths: {
    settings: '/path/to/settings.json',
    markdown: '/path/to/output.md'
  }
};

const watcher = new MCPWatcher(config);

// Start the watcher
await watcher.start();

// Update documentation manually
await watcher.update();

// Stop the watcher
await watcher.stop();
```

### Custom Parser and Generator

You can also create custom parsers and generators by extending the base classes:

```javascript
import { MCPSettingsParser, MDGenerator } from 'mcp-config-watcher';

class CustomParser extends MCPSettingsParser {
  // Override methods as needed
}

class CustomGenerator extends MDGenerator {
  // Override methods as needed
}

// Use your custom classes
const parser = new CustomParser(config);
const generator = new CustomGenerator(config, parser);
```

### Environment Variables

MCP Config Watcher supports the following environment variables:

- `MCP_CONFIG_PATH`: Path to the configuration file
- `MCP_SETTINGS_PATH`: Path to the MCP settings file
- `MCP_MARKDOWN_PATH`: Path to the output markdown file
- `OPENAI_API_KEY`: OpenAI API key for AI-powered tool discovery
